<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Practice Questions - Solved Subqueries</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Prevent body scroll for horizontal slideshow transition */
            overflow: hidden; 
            background-color: #f7f9fc;
        }
        /* Custom class for the horizontal page container */
        .page-container {
            display: flex;
            width: fit-content; 
            transition: transform 0.5s ease-in-out;
        }
        /* Style for individual pages */
        .page {
            flex: none;
            width: 100vw;
            height: 100vh;
            padding: 4rem 10vw;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            /* Enable vertical scroll for content that overflows the 100vh height */
            overflow-y: auto; 
            box-sizing: border-box; 
        }
        
        /* Two-Column Layout for Query/Result sections */
        .two-column-layout {
            display: flex;
            gap: 3rem; /* Spacing between columns */
            width: 100%;
            margin-top: 1rem;
            align-items: flex-start; 
        }

        .main-content {
            /* Takes 65% of the space for tables/explanations (Left Column) */
            flex: 3; 
            min-width: 0; 
        }
        
        .aside-content {
            /* Takes 35% of the space for the code block (Right Column) */
            flex: 1.5; 
            min-width: 300px; 
            max-width: 400px; 
            position: sticky; /* Keeps the code block pinned while scrolling main content */
            top: 4rem; /* Offset from the top of the viewport */
            align-self: flex-start; 
        }
        
        /* Navigation Button Style */
        .nav-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            padding: 1.5rem 1rem;
            background-color: rgba(0, 0, 0, 0.2);
            color: white;
            transition: background-color 0.3s, opacity 0.3s;
            cursor: pointer;
            border: none;
            outline: none;
        }
        .nav-btn:hover:not(:disabled) {
            background-color: rgba(0, 0, 0, 0.4);
        }
        .nav-btn:disabled {
            opacity: 0;
            cursor: default;
        }
        #prev-btn {
            left: 0;
            border-top-right-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }
        #next-btn {
            right: 0;
            border-top-left-radius: 0.5rem;
            border-bottom-left-radius: 0.5rem;
        }
        /* Custom table styling */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .data-table th, .data-table td {
            border: 1px solid #e2e8f0;
            padding: 0.75rem;
            text-align: left;
        }
        .data-table th {
            background-color: #e0f2f1;
            font-weight: 600;
        }
        /* Code Block Styling */
        .code-container {
            position: relative;
            background-color: #2d3748; /* Dark background for code */
            color: #f7fafc;
            padding: 1.5rem; /* Increased padding */
            border-radius: 0.5rem;
            margin-top: 1rem;
            width: 100%; /* Take full width of its column */
            min-height: 150px; 
            overflow-x: auto; /* Enable horizontal scroll for long lines */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .code-container code {
            font-family: monospace;
            white-space: pre; /* Essential for preventing long lines from wrapping */
            display: block;
            font-size: 0.9rem; /* Slightly smaller font for more lines */
            line-height: 1.4;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.75rem;
            background-color: #48bb78; /* Green button */
            color: white;
            border-radius: 0.3rem;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .copy-btn:hover {
            background-color: #38a169;
        }

        /* Specific styles for definition lists */
        .definition-list dt {
            font-weight: 700;
            color: #16a3b3;
            margin-top: 0.5rem;
        }
        .definition-list dd {
            margin-left: 1.5rem;
            color: #4b5563;
        }
        .step-explanation {
            background-color: #f0f9ff;
            padding: 1rem;
            border-left: 4px solid #38bdf8;
            margin-top: 1rem;
            width: 100%;
        }
        .note {
            background-color: #fffbeb;
            border: 1px solid #fcd34d;
            padding: 0.75rem;
            border-radius: 0.375rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body>

    <div id="content-wrapper" class="page-container">

        <div class="page bg-white shadow-xl">
            <h1 class="text-4xl font-bold text-teal-700 mb-6 rounded-lg p-2 bg-teal-50">
                SQL Practice Setup: Subqueries
            </h1>
            <p class="text-xl font-medium mb-4 text-gray-700">
                The following solved questions use a single master table: <strong class="text-teal-600">employees</strong>.
            </p>
            
            <div class="two-column-layout">
                <div class="main-content" style="flex: 1.5; min-width: 250px;">
                    <p class="text-xl font-medium mb-2 text-teal-700">employees Table</p>
                    <table class="data-table">
                        <thead><tr><th>emp_id</th><th>emp_name</th><th>salary</th><th>department</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Amit</td><td>50000</td><td>HR</td></tr>
                            <tr><td>2</td><td>Neha</td><td>65000</td><td>Finance</td></tr>
                            <tr><td>3</td><td>Rohan</td><td>40000</td><td>IT</td></tr>
                            <tr><td>4</td><td>Mehul</td><td>65000</td><td>Finance</td></tr>
                            <tr><td>5</td><td>Karan</td><td>30000</td><td>IT</td></tr>
                        </tbody>
                    </table>
                </div>
                <aside class="aside-content" style="position: static; flex: 3; max-width: 600px;">
                    <h3 class="text-lg font-semibold text-gray-800 mb-1">SQL Creation Script</h3>
                    <div class="code-container" style="min-height: 250px;">
                        <button class="copy-btn" onclick="copyCode(this)" data-code-target="code-create-employees">Copy Code</button>
                        <pre><code id="code-create-employees">CREATE TABLE employees (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50),
    salary INT,
    department VARCHAR(50)
);

INSERT INTO employees VALUES
(1, 'Amit', 50000, 'HR'),
(2, 'Neha', 65000, 'Finance'),
(3, 'Rohan', 40000, 'IT'),
(4, 'Mehul', 65000, 'Finance'),
(5, 'Karan', 30000, 'IT');</code></pre>
                    </div>
                </aside>
            </div>
        </div>
        
        <div class="page bg-teal-50">
            <h1 class="text-4xl font-black text-teal-800 mb-2">SQL Practice: Scalar Subqueries (4 Questions)</h1>
            <p class="text-xl font-medium mb-6 text-gray-700">These queries use subqueries to calculate a single value (a scalar) that is then used in the outer query's WHERE clause.</p>
        </div>


        <div class="page bg-gray-50">
            <h2 class="text-3xl font-bold text-teal-600 mb-6">Q1: Employees Earning More Than Average Salary</h2>
            <div class="two-column-layout">
                <div class="main-content">
                    <p class="text-gray-700 mb-4">
                        <strong>Goal:</strong> Find the <code>emp_name</code> and <code>salary</code> of employees earning more than the overall company average salary.
                    </p>
                    <div class="step-explanation">
                        <p class="font-bold">Solution using a Scalar Subquery:</p>
                        <ol class="list-decimal list-inside ml-2">
                            <li>The <strong>inner query</strong> calculates the single, overall average salary (50000).</li>
                            <li>The <strong>outer query</strong> then filters the employees where their salary is greater than the value returned by the subquery.</li>
                        </ol>
                    </div>
                    <p class="text-xl font-medium mb-2 mt-6 text-teal-700">Result Table</p>
                    <table class="data-table max-w-sm">
                        <thead><tr><th>emp_name</th><th>salary</th></tr></thead>
                        <tbody>
                            <tr><td>Neha</td><td>65000</td></tr>
                            <tr><td>Mehul</td><td>65000</td></tr>
                        </tbody>
                    </table>
                    <p class="text-xs text-gray-500 mt-2">
                        *Calculation: Overall Average Salary is 50000.*
                    </p>
                </div>
                <aside class="aside-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">SQL Code (Scalar Subquery)</h3>
                    <div class="code-container">
                        <button class="copy-btn" onclick="copyCode(this)" data-code-target="code-q1">Copy Code</button>
                        <pre><code id="code-q1">SELECT emp_name, salary
FROM employees
WHERE salary > (
    SELECT AVG(salary)
    FROM employees
);</code></pre>
                    </div>
                </aside>
            </div>
        </div>

        <div class="page bg-white">
            <h2 class="text-3xl font-bold text-teal-600 mb-6">Q2: Employees Working in Same Department as Neha</h2>
            <div class="two-column-layout">
                <div class="main-content">
                    <p class="text-gray-700 mb-4">
                        <strong>Goal:</strong> Find employees who share the same department as 'Neha', without hardcoding the department name.
                    </p>
                    <div class="step-explanation">
                        <p class="font-bold">Solution using a Scalar Subquery:</p>
                        <ol class="list-decimal list-inside ml-2">
                            <li>The <strong>inner query</strong> finds the single department name ('Finance') associated with 'Neha'.</li>
                            <li>The <strong>outer query</strong> filters employees where their <code>department</code> equals the department name returned by the subquery.</li>
                        </ol>
                    </div>
                    <p class="text-xl font-medium mb-2 mt-6 text-teal-700">Result Table</p>
                    <table class="data-table max-w-sm">
                        <thead><tr><th>emp_name</th><th>department</th></tr></thead>
                        <tbody>
                            <tr><td>Neha</td><td>Finance</td></tr>
                            <tr><td>Mehul</td><td>Finance</td></tr>
                        </tbody>
                    </table>
                </div>
                <aside class="aside-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">SQL Code (Scalar Subquery)</h3>
                    <div class="code-container">
                        <button class="copy-btn" onclick="copyCode(this)" data-code-target="code-q2">Copy Code</button>
                        <pre><code id="code-q2">SELECT emp_name, department
FROM employees
WHERE department = (
    SELECT department
    FROM employees
    WHERE emp_name = 'Neha'
);</code></pre>
                    </div>
                </aside>
            </div>
        </div>

        <div class="page bg-gray-50">
            <h2 class="text-3xl font-bold text-teal-600 mb-6">Q3: Employees Having the Highest Salary</h2>
            <div class="two-column-layout">
                <div class="main-content">
                    <p class="text-gray-700 mb-4">
                        <strong>Goal:</strong> Find the <code>emp_name</code> and <code>salary</code> of employees who match the maximum salary in the table.
                    </p>
                    <div class="step-explanation">
                        <p class="font-bold">Solution using a Scalar Subquery:</p>
                        <ol class="list-decimal list-inside ml-2">
                            <li>The <strong>inner query</strong> calculates the single maximum salary (65000) from the entire <code>employees</code> table.</li>
                            <li>The <strong>outer query</strong> filters employees where their salary is exactly equal to the maximum salary calculated by the subquery.</li>
                        </ol>
                    </div>
                    <p class="text-xl font-medium mb-2 mt-6 text-teal-700">Result Table</p>
                    <table class="data-table max-w-lg">
                        <thead><tr><th>emp_name</th><th>salary</th></tr></thead>
                        <tbody>
                            <tr><td>Neha</td><td>65000</td></tr>
                            <tr><td>Mehul</td><td>65000</td></tr>
                        </tbody>
                    </table>
                </div>
                <aside class="aside-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">SQL Code (Scalar Subquery)</h3>
                    <div class="code-container">
                        <button class="copy-btn" onclick="copyCode(this)" data-code-target="code-q3">Copy Code</button>
                        <pre><code id="code-q3">SELECT emp_name, salary
FROM employees
WHERE salary = (
    SELECT MAX(salary)
    FROM employees
);</code></pre>
                    </div>
                </aside>
            </div>
        </div>
        
        <div class="page bg-white">
            <h2 class="text-3xl font-bold text-teal-600 mb-6">Q4: Employees Earning Less Than Amit</h2>
            <div class="two-column-layout">
                <div class="main-content">
                    <p class="text-gray-700 mb-4">
                        <strong>Goal:</strong> Find the <code>emp_name</code> and <code>salary</code> of employees whose salary is less than 'Amit's salary, without knowing Amit's salary beforehand.
                    </p>
                    <div class="step-explanation">
                        <p class="font-bold">Solution using a Scalar Subquery:</p>
                        <ol class="list-decimal list-inside ml-2">
                            <li>The <strong>inner query</strong> fetches the single salary value (50000) for the employee named 'Amit'.</li>
                            <li>The <strong>outer query</strong> then filters all employees where their <code>salary</code> is less than the specific salary returned by the subquery.</li>
                        </ol>
                    </div>
                    <p class="text-xl font-medium mb-2 mt-6 text-teal-700">Result Table</p>
                    <table class="data-table max-w-lg">
                        <thead><tr><th>emp_name</th><th>salary</th></tr></thead>
                        <tbody>
                            <tr><td>Rohan</td><td>40000</td></tr>
                            <tr><td>Karan</td><td>30000</td></tr>
                        </tbody>
                    </table>
                </div>
                <aside class="aside-content">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-3">SQL Code (Scalar Subquery)</h3>
                    <div class="code-container">
                        <button class="copy-btn" onclick="copyCode(this)" data-code-target="code-q4">Copy Code</button>
                        <pre><code id="code-q4">SELECT emp_name, salary
FROM employees
WHERE salary < (
    SELECT salary
    FROM employees
    WHERE emp_name = 'Amit'
);</code></pre>
                    </div>
                </aside>
            </div>
        </div>

    </div>

    <button id="prev-btn" class="nav-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-8 h-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
        </svg>
    </button>
    <button id="next-btn" class="nav-btn">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-8 h-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
        </svg>
    </button>

    <script>
        const contentWrapper = document.getElementById('content-wrapper');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const pages = document.querySelectorAll('.page');
        const totalPages = 6;
        let currentPage = 0;

        /**
         * Updates the position of the content wrapper to show the current page.
         */
        function updatePagePosition() {
            // The content wrapper is translated horizontally by the width of the viewport multiplied by the current page index.
            const offset = currentPage * -100;
            contentWrapper.style.transform = `translateX(${offset}vw)`;
            updateButtonState();
            // Scroll the current page content to the top when navigating
            pages[currentPage].scrollTop = 0; 
        }

        /**
         * Enables/disables navigation buttons based on the current page index.
         */
        function updateButtonState() {
            prevBtn.disabled = currentPage === 0;
            nextBtn.disabled = currentPage === totalPages - 1;
        }

        // Event listener for the Previous button
        prevBtn.addEventListener('click', () => {
            if (currentPage > 0) {
                currentPage--;
                updatePagePosition();
            }
        });

        // Event listener for the Next button
        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages - 1) {
                currentPage++;
                updatePagePosition();
            }
        });

        // Initialize the page on load
        window.onload = () => {
            // Ensure the initial position and button state are set
            updatePagePosition();
        };

        // Handle window resize to re-apply the position based on the new viewport width
        window.addEventListener('resize', updatePagePosition);


        /**
         * Copies the content of the target code block to the clipboard.
         * @param {HTMLElement} buttonElement - The button element that was clicked.
         */
        async function copyCode(buttonElement) {
            const codeBlockId = buttonElement.getAttribute('data-code-target');
            const codeElement = document.getElementById(codeBlockId);
            const codeText = codeElement.innerText;

            try {
                // Use the modern clipboard API
                await navigator.clipboard.writeText(codeText);
                
                // Temporary success feedback
                buttonElement.textContent = 'Copied!';
                setTimeout(() => {
                    buttonElement.textContent = 'Copy Code';
                }, 1500);

            } catch (err) {
                console.error('Failed to copy text: ', err);
                buttonElement.textContent = 'Error!';
                setTimeout(() => {
                    buttonElement.textContent = 'Copy Code';
                }, 1500);
            }
        }
    </script>
</body>
</html>
